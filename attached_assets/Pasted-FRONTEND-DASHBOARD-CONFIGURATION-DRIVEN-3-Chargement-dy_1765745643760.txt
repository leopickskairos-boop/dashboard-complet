FRONTEND (DASHBOARD) – CONFIGURATION DRIVEN

3️⃣ Chargement dynamique du dashboard

Au login :
	1.	Résoudre le tenant_id (token, subdomain ou header)
	2.	Charger tenant_settings
	3.	Construire le dashboard dynamiquement à partir de cette configuration

Exemples :
	•	Modules affichés ou non selon enabled_modules
	•	Règles métier dynamiques (booking, appels, etc.)
	•	Branding spécifique par client (logo, couleurs)

Aucune logique client spécifique ne doit être hardcodée.

⸻

DIFFÉRENCIATION ENTRE DASHBOARDS

Les différences entre clients doivent être gérées par :
	•	Configuration en base de données
	•	Feature flags par tenant
	•	Paramètres métier dynamiques

❗ Cas exceptionnels

Si un client nécessite un comportement très spécifique :
	•	Introduire un champ tenant_type (standard / custom)
	•	Adapter le comportement sans dupliquer le code

⸻

STRUCTURE DU CODE (À METTRE EN PLACE OU REFACTORER)

Backend
	•	Architecture modulaire par domaine (auth, tenants, bookings, calls, reviews, billing, integrations)
	•	Séparation stricte :
	•	routes
	•	controllers
	•	services
	•	schemas/validation
	•	Middleware central pour :
	•	résolution du tenant
	•	contrôle d’accès
	•	permissions

Frontend
	•	Organisation par features
	•	Chaque feature lit la configuration tenant avant de s’afficher
	•	Aucun composant ne doit supposer qu’il est activé par défaut

⸻

NETTOYAGE & OPTIMISATION
	•	Supprimer les champs DB inutilisés
	•	Supprimer le code mort ou redondant
	•	Optimiser les requêtes (index sur tenant_id, created_at)
	•	Clarifier les rôles (SUPER_ADMIN, TENANT_ADMIN, STAFF, VIEWER)
	•	Isoler les scripts de nettoyage / migration dans des scripts dédiés

⸻

RÈGLE ABSOLUE

Agis comme si ce produit devait :
	•	Passer de 5 à 60 clients
	•	Avec des dashboards parfois différents
	•	Sans explosion de complexité
	•	Sans refonte future

Chaque décision doit favoriser :
	•	la scalabilité
	•	la lisibilité
	•	la séparation des responsabilités
	•	la réduction des coûts

Commence par analyser l’existant, puis applique les modifications progressivement et de manière sécurisée.